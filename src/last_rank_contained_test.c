#include "commands.h"
#include "test_util.h"
#include "util.h"

#include <stdlib.h>

static struct {
	const char *name;
	const char *args[40];
	const char *expected;
} test_cases[] = {

{
	"not_enough_args",
	{"一"},
	"32個の区切り漢字を必するけれど、1個が渡された。\n"
	"exit: 1\n"
},

{
	"typical_kugiri_kanji_test",
	{
		"-s",
		"会", "信", "刀", "匚", "告", "型", "女", "宿", "工", "弋",
		"悪", "戸", "提", "日", "木", "業", "气", "減", "爪", "疋",
		"示", "立", "結", "羽", "艸", "角", "谷", "足", "通", "里",
		"隹", "風",
	},
	"[ 一 ] 1 丁了万丈上下与丸久中予不世主両争乱事並乳乗乾互井亡交京人入今元介公仕他付代令以兄 (1142 . -3 . -3)\n"
	"[ 会 ] 2 会全共充先光仮仰仲件任企伊休伝作児兵伴伸伺似但位低住佐体何余使免舎併例具典供依価 (1552 . 3 . 0)\n"
	"[ 信 ] 3 信便係促保個修俺倉倍倒候借値党健停側備働催傷傾像僕億優償内円冊再最写冬冷凄凍処出 (1289 . 1 . 1)\n"
	"[ 刀 ] 4 分切刊列初判別利到制刷券刺刻則削前剤副割創劇力功加助努労効勉動務勝募勤勢勧包化北 (1150 . -1 . 0)\n"
	"[ 匚 ] 5 区医千午半卒協南単博占印危即厚原厳去参又及友反収取受口可古台史右号司合各吉同名向 (975 . -2 . -2)\n"
	"[ 告 ] 6 告君否含吸吹呂味周呼命和品咲員唱商問善喜喫営器回因団困囲図固国圏園土圧在地坂均坊 (1398 . 3 . 1)\n"
	"[ 型 ] 7 型城域執基埼堂報場塗塚塩塾境増壁壊士声売変夏夕外多夜夢大天太夫央失奇奈奏契奥奨奮 (1303 . 3 . 4)\n"
	"[ 女 ] 8 女奴好妙妹妻姉始委姿姫娘婚婦嫌嬉子字存季学宅宇守安完宗官宙定宜宝実客宣室宮害家容 (1224 . 0 . 4)\n"
	"[ 宿 ] 9 宿寂寄密富寒寝察寧審寺対寿封専将射導小少就尾局居届屋展属層履山岐岡岩岸島崎崩川州 (1339 . 2 . 6)\n"
	"[ 工 ] 0 工左巨差己巻市布希師席帯帰帳常幅幌幕干平年幸幹幼庁広床底店府度座庫庭康廃延建弁弊 (1237 . 0 . 6)\n"
	"[ 弋 ] q 式引弱張強弾当形彩影役彼待律後徒従得御復微徳徴心必志忘忙応快念怒怖思急性怪恋恐息恵 (1120 . -2 . 4)\n"
	"[ 悪 ] w 悪悟悠患悩悲情惑惜惨惹想愉意愚愛感慌態慎慮慢慣慰慶憂憧憩憲憶懐懸成我戒戦戯戴 (1811 . 18 . 22)\n"
	"[ 戸 ] r 戸戻房所手打払扱承技投抗折抜択抱押担拠拡持指挑挙振授掛採探接推掲描揃 (1066 . -7 . 15)\n"
	"[ 提 ] t 提揚換握援損携摘撃撮操支改攻放政故救敗教散数敵敷整文料断新方施旅族既 (1222 . 0 . 15)\n"
	"[ 日 ] y 日旧早曲旨旬更昇明易昔星映春昨昭是昼時書普替景晴暑暇暖暗暮暴曜月有服望朝期 (1131 . -2 . 13)\n"
	"[ 木 ] p 木未末本札材村束条来杯東松板析林枚果柄染査栄校株根格案桜梅森棚植検極 (1156 . -2 . 11)\n"
	"[ 業 ] s 業楽概構様模標権横樹橋機欄欠次欲歌止正武歩歯歳歴死残段殺母毎比毛氏民 (1023 . -2 . 9)\n"
	"[ 气 ] d 気水永求江池決沖沢河油治況泉泊法波泣注活洋洗津海派流浜浮浴消済液深混清 (999 . -10 . -1)\n"
	"[ 減 ] g 減渡温測港湖湯湾満準源滅漢演漫潟激濃瀬火災炎点為無然焼煮煙照熊熱燃爆 (1226 . -4 . -5)\n"
	"[ 爪 ] h 父片版牛物特犬犯状狙独猫率玉王現球理環甘生産用田由甲申男町画界留略異番 (1201 . -4 . -9)\n"
	"[ 疋 ] k 疑疲病症痛療癒発登白百的皆皮益盛監盤目直相省県真眠着督知短石砂研破確 (1040 . -6 . -15)\n"
	"[ 示 ] l 示礼社祈祉祐祖祝神祥票祭視禁福秀私秋科秒秘称移程税稚種稲穀稼稽稿穂積穏穫穴究空突窓 (1881 . 12 . -3)\n"
	"[ 立 ] ; 立童端競竹笑第筆等筋答策節算管箱範築簡籍米粉粧精糖系紀約紅納純紙級素索細紹終組経紫 (1261 . 0 . -3)\n"
	"[ 結 ] z 結絞絡給統絵絶継続維網綺総緑緒練緊線締編縁縄繁縮績繋織繰罪置署美群義 (1346 . 4 . 1)\n"
	"[ 羽 ] x 羽翌習老考者耐耳聖聞聴職肉肌肩育背胸能脂脱脳腐腕腰腹臨自臭至致興舗舞航般船良色 (1219 . -2 . -1)\n"
	"[ 艸 ] c 花芸英若苦茶草荷華著菓菜落葉蔵薬藤虫融血行術街衛衣表袋被装裏補製複西要見規覚親覧観 (1004 . -5 . -6)\n"
	"[ 角 ] v 角解触言計討記訪設許訳診証評詞試詰話該詳認誌誕誘語誤説読調誰課談請論諸講謝識警議護 (1113 . -5 . -11)\n"
	"[ 谷 ] b 谷豆豊豚象豪負財販貧貨責貯貰貴買貸費貼賀賃資賛賞質賢購贈赤走起超越趣 (1388 . 2 . -9)\n"
	"[ 足 ] n 足距跡路踊踏躍身車軍転軽較載輝輩輪輸辛辞農辺込迎近返迫述迷追退送逃逆 (1209 . 0 . -9)\n"
	"[ 通 ] m 通透途速造連週進遅遊運過道達違遠遣適選遺避還那邪郎郡部郵郷都配酒酢酸 (1316 . 2 . -7)\n"
	"[ 里 ] , 里重野量金針釣鉄銀銘録鍋鏡鑑長門閉開間関閲闘阪防限降院除陰陸険陽隊階随際障隠隣 (1257 . 0 . -7)\n"
	"[ 隹 ] . 雄雅集雇雑難離雨雪雰雲電震霊露青静非面革靴韓音章響頂頃項順須預頑領頭頼題額顔類願顧 (1367 . 4 . -3)\n"
	"[ 風 ] / 風飛食飯飲飼飾養館首香馬駄駅駆駐騒験驚骨高髪鬼魂魅魔魚鮮鳥鳴鶏鹿麗麦麺麻黄黒鼻齢龍 (1380 . 2 . -1)\n"
	"各行平均位: 1252.9\n"
	"目標位:  1261\n"
	"合計漢字数:  1250\n"
	"exit: 0\n"
},

{
	"typical_kugiri_kanji_test_rank_sort",
	{
		"会", "信", "刀", "匚", "告", "型", "女", "宿", "工", "弋",
		"悪", "戸", "提", "日", "木", "業", "气", "減", "爪", "疋",
		"示", "立", "結", "羽", "艸", "角", "谷", "足", "通", "里",
		"隹", "風",
	},
	"[ 一 ] 1 人事入中上今下以付他不代予仕世介公主元京交万了乗久井並両与丸争丁丈互乳兄令乱乾亡 (1142 . -3 . -3)\n"
	"[ 会 ] 2 会作使全体価何先件住供位休企伝光共例具任低似児仲充典余免佐伊依兵伸仮舎伴併伺但仰 (1552 . 3 . 0)\n"
	"[ 信 ] 3 出最内信保写円像個備便係優再値健修処僕側働俺冷催倍倒党停借倉冬傷候凄冊億償傾促凍 (1289 . 1 . 1)\n"
	"[ 刀 ] 4 分前動利力加化初切別務制北勝効判割募助削労券勢勤勉創則功到列包勧劇剤刺刊刻刷努副 (1150 . -1 . 0)\n"
	"[ 匚 ] 5 合取名同可参受向単原口友古号各半収台及反医区去協南千印史右午吉又司占厳危卒博即厚 (975 . -2 . -2)\n"
	"[ 告 ] 6 品商地問国回味在員図告営和含周土園器団命君囲呼善困喜因圧固呂吸坂吹咲均否喫坊圏唱 (1398 . 3 . 1)\n"
	"[ 型 ] 7 大報場変外売多天基域夏夜型声士境増太夫失夢城夕堂奈奥契奏壊塩央壁塗奇塚奨埼執塾奮 (1303 . 3 . 4)\n"
	"[ 女 ] 8 定子学実家安好女容客始字宅存室完害宮婚守委嫌嬉季姿婦娘官宝妙宇姉宣宜妻姫奴宗妹宙 (1224 . 0 . 4)\n"
	"[ 宿 ] 9 対小山屋少川届島専宿展寄局富岡居寝導属崎州密寺察就岩将履寒尾層審寿射岸寧崩封岐寂 (1339 . 2 . 6)\n"
	"[ 工 ] 0 年店度市常広帯庫平工帰建座康師希差幸布府左巻庭席帳弁幅己底干幼延廃床幹弊幕庁巨幌 (1237 . 0 . 6)\n"
	"[ 弋 ] q 思当後性心必引応強式得待役張形彼念御急影忘復快恋徒息従恵律恐志弾弱徴怖微忙彩怒徳怪 (1120 . -2 . 4)\n"
	"[ 悪 ] w 情感成意戦愛想悪態我悩憶惑慮慣慢悲患懐懸憲悟憧憩慶慎憂愚戯惜愉戒惨戴慰悠慌惹 (1811 . 18 . 22)\n"
	"[ 戸 ] r 手所持探投掲指戻択技払承振接戸担扱打押抜拡採掛描推授挙折房揃抱拠挑抗 (1066 . -7 . 15)\n"
	"[ 提 ] t 方新料文数教旅支施提政携断換放改援整撮族撃故敵散攻敗操損既敷救握揚摘 (1222 . 0 . 15)\n"
	"[ 日 ] y 日時書月明期更有映早朝望曲昨普替曜景春星暮服晴昼昔是暗暑昇易昭旧暇暖旬暴旨 (1131 . -2 . 13)\n"
	"[ 木 ] p 本検来格果東条材校案木村株板査札未末松根極森枚植林柄梅桜染析栄杯束棚 (1156 . -2 . 11)\n"
	"[ 業 ] s 業楽様機次正民残歩構毎止比権段歌死標欲氏母歳横歴橋毛歯武殺模概欠樹欄 (1023 . -2 . 9)\n"
	"[ 气 ] d 気法注活水決海流求済消治況泉沢泊派深洗洋波浜沖江油混池清津泣浴液河永浮 (999 . -10 . -1)\n"
	"[ 減 ] g 無点然満演温焼準為熱火減激源渡照湯港爆測災漫濃瀬燃煙煮湖漢潟湾炎滅熊 (1226 . -4 . -5)\n"
	"[ 爪 ] h 用生物理画現特番産田状界版町男申由異環球王率独犬父玉留略猫甘片牛犯甲狙 (1201 . -4 . -9)\n"
	"[ 疋 ] k 発的目知登真確着相県直白研病皆石療痛省盛症疲短破監百盤眠疑益癒皮督砂 (1040 . -6 . -15)\n"
	"[ 示 ] l 示社私空種稿神科究移程福税視積票禁突祭称秋秘礼稼祝窓穴祉秀秒祈稲稚祖穂穫祥祐穏稽穀 (1881 . 12 . -3)\n"
	"[ 立 ] ; 索立約等第経細組笑素終紹管答簡系策米納算級築紙籍節精端競筋紀箱純範粉筆紅竹童粧糖紫 (1261 . 0 . -3)\n"
	"[ 結 ] z 結美続線置総編絞絡義絵絶緒給練統織継縄締群績緑維綺縮罪繰緊縁網繋繁署 (1346 . 4 . 1)\n"
	"[ 羽 ] x 自者能考良色育聞職習致舗肉般興聴舞肌背船老腹航脱脳羽翌耳腕臭脂至聖耐胸腐臨肩腰 (1219 . -2 . -1)\n"
	"[ 艸 ] c 見行表要覧規花落観術製葉著西親英覚装茶薬苦若藤補荷街複芸菜裏華血草袋融蔵被菓衛衣虫 (1004 . -5 . -6)\n"
	"[ 角 ] v 記言話認設読詳語解調計評説試議証護識談論誰講訳許請角誌訪課診討該謝誕触警詰誘詞諸誤 (1113 . -5 . -11)\n"
	"[ 谷 ] b 買質資販購象起費負赤豊走越超貸賃谷責賞豆財貴趣貨賀貼贈貯豪貰豚貧賛賢 (1388 . 2 . -9)\n"
	"[ 足 ] n 送近込車載追返身転足農辺軽路較迎退軍逆迷輸逃輪躍辞跡辛述踏距輩輝迫踊 (1209 . 0 . -9)\n"
	"[ 通 ] m 通部選連配道達違運過都週進適速造遊酒途郎遠遅遣郵酸遺邪那避郡透郷還酢 (1316 . 2 . -7)\n"
	"[ 里 ] , 間関開金録長野際重限除院門量降険防銀阪鉄障階閉釣闘隊陽里針陸隣隠閲鑑鍋銘鏡随陰 (1257 . 0 . -7)\n"
	"[ 隹 ] . 集電面題願音順頭類非頂項顔難雑額頃離雨青頼頑章響韓静雪革雰震領露須雄雲霊靴顧預雇雅 (1367 . 4 . -3)\n"
	"[ 風 ] / 高食風験駅館飲馬飛香黒魔養飯魚首鳥鮮魅麗齢髪鹿驚骨黄駄駐麻飼飾鳴駆麺龍麦鬼鼻騒鶏魂 (1380 . 2 . -1)\n"
	"各行平均位: 1252.9\n"
	"目標位:  1261\n"
	"合計漢字数:  1250\n"
	"exit: 0\n"
},

{
	"kanji_not_in_db",
	{
		"会", "信", "刀", "匚", "告", "型", "女", "宿", "工", "弋",
		"悪", "戸", "提", "话", "木", "業", "气", "減", "爪", "疋",
		"示", "立", "結", "羽", "艸", "角", "谷", "足", "通", "里",
		"隹", "風",
	},
	"[ 话 ] は区切り漢字に指定されているけれど、KANJI配列に含まれていない。\n"
	"exit: 2\n",
},

{
	"kanji_not_valid_kugiri",
	{
		"会", "信", "刀", "匚", "告", "型", "女", "宿", "工", "弋",
		"悪", "戸", "提", "俯", "木", "業", "气", "減", "爪", "疋",
		"示", "立", "結", "羽", "艸", "角", "谷", "足", "通", "里",
		"隹", "風",
	},
	"[ 俯 ] は区切り漢字として使えません。\n"
	"exit: 3\n",
},

};

int main(void)
{
	size_t test_i;
	for (test_i = 0; test_i < sizeof(test_cases) / sizeof(*test_cases);
	     test_i++) {
		int arg_count, exit_code;

		start_test(__FILE__, test_cases[test_i].name);

		for (arg_count = 0; test_cases[test_i].args[arg_count];
		     arg_count++) {}
		exit_code = print_last_rank_contained(
			test_cases[test_i].args, arg_count);
		fprintf(out, "exit: %d\n", exit_code);

		end_test(test_cases[test_i].expected);
	}
	return 0;
}
